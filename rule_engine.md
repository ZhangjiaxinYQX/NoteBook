# 什么是规则引擎
随着业务的发展，如同商品折扣、条件校验等业务越发繁杂，都通过代码编入逻辑会让代码十分庞大繁杂，且代码修改测试上线有单独的流程，增加了上线周期。于是，使用规则引擎，将业务逻辑从服务框架中剥离出来，使用约定好的协议描述业务，规则引擎就可以自动解析运行业务。

优点：解耦、提高规则可读性可维护性、增加扩展性动态适配新业务

# 业界规则引擎对比
## Drools
https://docs.drools.org/8.44.0.Final/drools-docs/drools/rule-engine/index.html

LiteFlow vs Drools对比

https://cloud.tencent.com/developer/article/2277247

Rete算法

https://www.cnblogs.com/xitingxie/p/9173175.html

我们项目是什么？

校验网络设备中用户的配置参数数据，之前是自己内部使用，速度较慢，但使用频率低，勉强能够适应。但现在新增动态配置的特性，需要开放给客户使用，几十秒-分钟级别的延时用户无法忍受，需要进行优化

数据模型是json类型的数据，通过配置名作为key，配置值作为value（值为字符串、数字、嵌套），其中有嵌套值的情况，规则是进行计算和操作（比如数据库操作），那怎么知道数据需要匹配上什么规则呢？原本的方案中，是有字段映射到规则的数据库记录的，而规则则是需要某些或某个字段全部都存在，才可以激活该规则（规则获取数据是从输入数据中全局获取）。用户面对的规则，是最多200+个版本的规则库（规则会存在重名的情况），但是同一类数据只会命中一个版本的规则

根据上述的描述，我们发现几个特点：

- 此种方法构建出来的规则是比较浅的树
- 规则多，服务最多只让使用4G运行内存（60版本规则情况）
- 不好对用户传入的数据进行实例建模，从业务发展的角度考虑，只建模规则是较好的选择

为什么我们不使用drools？

- 业务建模不容易，工作量大，json字段组合会形成新的实体，跟drools建模理念不符
- 规则数量庞大，千万条级别规则，drools运行占用内存太大，有运行内存限制
- 匹配形成的规则网络很浅，rete算法优化不明显

23432
## EasyRules
## QLExpress（阿里）
## Aviator（阿里）
## LiteFlow
